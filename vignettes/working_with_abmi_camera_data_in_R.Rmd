---
title: "Estimating Animal Density Using Camera Data"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{working_with_abmi_camera_data_in_R}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Working with ABMI Camera data in R

```{r setup}

library(abmi.camera.extras)

```

## Generate density estimates for an area of interest

ABMI camera data can be used to generate species-specific density estimates for a variety of species in a given area of interest. First, we subset the ABMI camera deployments by the specified area of interest (e.g. a Wildlife Management Unit; Municipality; etc).

In this example we use a sample of four WMUs - Crow Lake (code 512), Lac La Biche (503), Beaver River (502), and Amisk (504) - all of which are located in the central-east part of Alberta.   

```{r}

library(sf)

# aoi
wmu_sample <- st_read(system.file("extdata/wmu_sample.shp", package = "abmi.camera.extras"))

# Find deployments in aoi
wmu_sample_deployments <- ace_get_cam(wmu_sample, group_id = WMUNIT_NAM)

```

From here we can join density estimates for a species of interest in a given year for each deployment.

```{r}

# Join density
df_density <- ace_join_dens(wmu_sample_deployments, species = c("Moose", "White-tailed Deer"), nest = FALSE)

```

Next, we estimate the density of each species within each WMU.

```{r}

df_density_summary <- ace_summarise_dens(df_density, 
                                         group_id = WMUNIT_NAM, 
                                         agg_samp_per = FALSE, 
                                         conflevel = 0.9)

df_density_summary

```




